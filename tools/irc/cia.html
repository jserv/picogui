<html>
  <head>
    <title>Setting up your project for CIA commit monitoring</title>
  </head>

  <body>
    <h1>What is CIA?</h1>
    <p>CIA is a bot that will take email from your CVS/Subversion repositories' commit scripts, and output it to the
      #commits channel on freenode, and optionally to your project's IRC channel.
      It means you can sit in that channel and marvel in real time at all the free software
      being written all over the world. CIA also collects some 
      <a href="http://navi.picogui.org/cgi-bin/cia_stats.cgi">simple statistics</a>.</p>

    <h1>Using it with CVS</h1>

    <p> Download the <a href="ciabot">ciabot</a> script and follow the instructions in the comments at the top of the file. </p>

    <h1> Using it with Subversion </h1>

    <p>Place this script in hooks/post-commit under your repository directory: (This is the directory on the server containing the
       repository database, not inside the repository itself) </p>

    <code><pre>
#!/bin/sh
REPOS="$1"
REV="$2"
echo "`svnlook author -r $REV $REPOS`" committed revision $REV: "`svnlook log -r $REV $REPOS`" | \
   head -n 1 | mail -s "Announce <i>channelname</i>" commits@picogui.org&
    </pre></code>

    <p>Substitute the name of your channel for <i>channelname</i>. There is a slightly more complex
       example including colorizing and a commit directory name in the PicoGUI repository's
       <a href="http://navi.picogui.org/svn/picogui/trunk/tools/svn/hooks/post-commit">post-commit script</a>. </p>

    <h1>Controlling the bot</h1>

    <p> You can make the bot join your channel by sending an email to commits@picogui.org with the subject
        "JoinChannel <i>channelname</i>".
        (Leave out the "#" beginning the channel name) You can make it leave your channel by sending a mail with the subject
        "PartChannel <i>channelname</i>". </p> The email body will be ignored.

    <h1> Source code </h1>

    <p>
     <a href="http://navi.picogui.org/svn/picogui/trunk/tools/irc/announceBot.py">The bot</a>, 
     <a href="http://navi.picogui.org/svn/picogui/trunk/tools/irc/emailBotClient.py">The email-based client</a>.
     It falls under the "who cares" license, do anything you like with it. </p>

    <h1> Who wrote this stuff? </h1>
    
    <p> That would be scanline (Micah Dowty), in #picogui. This page is written by TD (Mike Hearn) in #autopackage.</p>

    <h1> Why is it called CIA? </h1>

    <p> Lalo Martins' joke: CIA was originally written to monitor the PicoGUI subversion repository, so the bot is a
      brainless entity designed to monitor subversion. If you don't get it, forget it :) </p>

    <hr>
    <p>1st June 2003</p>
  </body>

</html>
